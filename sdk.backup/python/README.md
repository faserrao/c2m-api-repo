# C2M API Python SDK

API for submitting documents with various routing options

This Python package is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 2.0.0
- Package version: 1.0.0
- Generator version: 7.15.0
- Build package: org.openapitools.codegen.languages.PythonClientCodegen

## Project Structure

```
sdk/python/
├── c2m_api/                    # Main package directory
│   ├── __init__.py            # Package initialization
│   ├── api_client.py          # Core API client implementation
│   ├── api_response.py        # API response wrapper
│   ├── configuration.py       # Client configuration
│   ├── exceptions.py          # Custom exceptions
│   ├── rest.py               # REST client implementation
│   ├── api/                  # API endpoint implementations
│   │   ├── __init__.py
│   │   ├── auth_api.py       # Authentication endpoints
│   │   └── default_api.py    # Main API endpoints
│   └── models/               # Data models
│       ├── __init__.py
│       └── [60+ model files] # Request/response models
├── docs/                      # API documentation
│   ├── AuthApi.md            # Auth endpoint docs
│   ├── DefaultApi.md         # Main endpoint docs
│   └── [60+ model docs]      # Model documentation
├── test/                      # Unit tests
│   ├── __init__.py
│   └── [60+ test files]      # Model and API tests
├── .github/                   # GitHub Actions config
├── .openapi-generator/        # Generator metadata
├── example.py                 # Usage example
├── setup.py                   # Package setup
├── requirements.txt           # Python dependencies
├── test-requirements.txt      # Test dependencies
├── README.md                  # This file
└── various config files       # CI/CD configurations
```

### Key Directories

#### `c2m_api/`
The main package containing all SDK functionality:
- **`api/`** - API endpoint implementations
  - `auth_api.py` - Token management (issue, revoke)
  - `default_api.py` - Job submission endpoints
- **`models/`** - Data models for requests/responses
  - Payment models: `ach_payment.py`, `credit_card_payment.py`, etc.
  - Job models: `single_doc_job_params.py`, `job_options.py`, etc.
  - Address models: `recipient_address.py`, `address_region.py`, etc.

#### `docs/`
Markdown documentation for every API endpoint and model:
- Includes code examples
- Parameter descriptions
- Response formats
- Authentication requirements

#### `test/`
Comprehensive test suite:
- Unit tests for all models
- API endpoint tests
- Test fixtures and utilities

## Requirements

Python 3.9+

## Installation & Usage

### pip install

If the python package is hosted on a repository, you can install directly using:

```sh
pip install git+https://github.com/c2m/c2m-api-python.git
```
(you may need to run `pip` with root permission: `sudo pip install git+https://github.com/c2m/c2m-api-python.git`)

For local development:
```sh
cd sdk/python
pip install -e .
```

Then import the package:
```python
import c2m_api
```

### Setuptools

Install via [Setuptools](http://pypi.python.org/pypi/setuptools).

```sh
python setup.py install --user
```
(or `sudo python setup.py install` to install the package for all users)

### Tests

Execute `pytest` to run the tests.

## Getting Started

### Quick Example - Template Endpoint (Recommended)

```python
import c2m_api
from c2m_api.rest import ApiException

# Configure API client
configuration = c2m_api.Configuration(
    host="https://api.c2m.com/v2",
    api_key={'Authorization': 'Bearer YOUR_API_KEY'}
)

# Create API client
with c2m_api.ApiClient(configuration) as api_client:
    # Create API instance
    api_instance = c2m_api.DefaultApi(api_client)
    
    # Create a single document job using template
    request = c2m_api.SubmitSingleDocWithTemplateParamsRequest(
        template_id="standard-letter",
        document_url="https://example.com/document.pdf",
        recipients=[
            {
                "name": "John Doe",
                "address": {
                    "line1": "123 Main St",
                    "city": "New York",
                    "state": "NY",
                    "zip": "10001"
                }
            }
        ]
    )
    
    try:
        # Submit job
        response = api_instance.submit_single_doc_with_template_params(request)
        print(f"Job created: {response.job_id}")
        print(f"Status: {response.status}")
    except ApiException as e:
        print(f"Exception: {e.status} - {e.body}")
```

### Authentication Example

```python
import c2m_api
from c2m_api.rest import ApiException

configuration = c2m_api.Configuration(
    host="https://api.c2m.com/v2"
)

with c2m_api.ApiClient(configuration) as api_client:
    auth_api = c2m_api.AuthApi(api_client)
    
    # Request long-term token
    token_request = c2m_api.LongTokenRequest(
        grant_type="client_credentials",
        client_id="your_client_id",
        client_secret="your_client_secret",
        scopes=["jobs:submit", "templates:read"],
        ttl_seconds=7776000  # 90 days
    )
    
    try:
        token_response = auth_api.issue_long_term_token(token_request)
        print(f"Token: {token_response.access_token}")
        print(f"Expires in: {token_response.expires_in} seconds")
        
        # Use the token for subsequent requests
        configuration.api_key['Authorization'] = f'Bearer {token_response.access_token}'
    except ApiException as e:
        print(f"Authentication failed: {e}")
```

## Documentation for API Endpoints

All URIs are relative to *https://api.c2m.com/v2*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*AuthApi* | [**issue_long_term_token**](docs/AuthApi.md#issue_long_term_token) | **POST** /auth/tokens/long | Issue or rotate a long-term token
*AuthApi* | [**issue_short_term_token**](docs/AuthApi.md#issue_short_term_token) | **POST** /auth/tokens/short | Issue a short-term access token
*AuthApi* | [**revoke_token**](docs/AuthApi.md#revoke_token) | **POST** /auth/tokens/{tokenId}/revoke | Revoke a token
*DefaultApi* | [**merge_multi_doc_params**](docs/DefaultApi.md#merge_multi_doc_params) | **POST** /jobs/multi-doc-merge | Merge multiple documents
*DefaultApi* | [**merge_multi_doc_with_template_params**](docs/DefaultApi.md#merge_multi_doc_with_template_params) | **POST** /jobs/multi-doc-merge-job-template | Merge documents with template
*DefaultApi* | [**multi_pdf_with_capture_params**](docs/DefaultApi.md#multi_pdf_with_capture_params) | **POST** /jobs/multi-pdf-address-capture | Process PDFs with address capture
*DefaultApi* | [**single_doc_job_params**](docs/DefaultApi.md#single_doc_job_params) | **POST** /jobs/single-doc | Submit single document
*DefaultApi* | [**split_pdf_params**](docs/DefaultApi.md#split_pdf_params) | **POST** /jobs/single-pdf-split | Split PDF into multiple mailings
*DefaultApi* | [**split_pdf_with_capture_params**](docs/DefaultApi.md#split_pdf_with_capture_params) | **POST** /jobs/single-pdf-split-addressCapture | Split PDF with address capture
*DefaultApi* | [**submit_multi_doc_params**](docs/DefaultApi.md#submit_multi_doc_params) | **POST** /jobs/multi-doc | Submit multiple documents
*DefaultApi* | [**submit_multi_doc_with_template_params**](docs/DefaultApi.md#submit_multi_doc_with_template_params) | **POST** /jobs/multi-docs-job-template | Submit multiple docs with template
*DefaultApi* | [**submit_single_doc_with_template_params**](docs/DefaultApi.md#submit_single_doc_with_template_params) | **POST** /jobs/single-doc-job-template | Submit single doc with template

## Documentation For Models

See the [docs/](docs/) directory for complete model documentation. Key models include:

- [SingleDocJobParams](docs/SingleDocJobParams.md) - Single document job parameters
- [JobOptions](docs/JobOptions.md) - Print and mail options
- [RecipientAddress](docs/RecipientAddress.md) - Recipient address details
- [PaymentDetails](docs/PaymentDetails.md) - Payment information
- [StandardResponse](docs/StandardResponse.md) - Standard API response

[View all models →](docs/)

## Documentation For Authorization

### bearerAuth

- **Type**: Bearer authentication (JWT)
- **Usage**: Set the token in configuration:
  ```python
  configuration.api_key['Authorization'] = 'Bearer YOUR_TOKEN'
  ```

## Error Handling

```python
from c2m_api.rest import ApiException

try:
    response = api_instance.some_endpoint(request)
except ApiException as e:
    print(f"Status: {e.status}")
    print(f"Reason: {e.reason}")
    print(f"Body: {e.body}")
    print(f"Headers: {e.headers}")
    
    # Handle specific errors
    if e.status == 401:
        # Refresh token
        pass
    elif e.status == 429:
        # Rate limited - check Retry-After header
        retry_after = e.headers.get('Retry-After', '60')
        time.sleep(int(retry_after))
```

## Advanced Usage

### Connection Pooling

```python
# Reuse the same client for multiple requests
api_client = c2m_api.ApiClient(configuration)
api_instance = c2m_api.DefaultApi(api_client)

# Use for many requests
for document in documents:
    response = api_instance.submit_single_doc_with_template_params(document)
```

### Timeout Configuration

```python
configuration = c2m_api.Configuration()
configuration.timeout = 60  # 60 seconds
configuration.connection_pool_maxsize = 10
```

### Debug Mode

```python
configuration = c2m_api.Configuration()
configuration.debug = True  # Enables HTTP request/response logging
```

## Support

- [C2M API Documentation](https://api.c2m.com/docs)
- [GitHub Issues](https://github.com/c2m/c2m-api-python/issues)
- [Email Support](mailto:support@c2m.com)

## License

See LICENSE file in the repository root.